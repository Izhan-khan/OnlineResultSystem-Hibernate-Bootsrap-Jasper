<!doctype html>
<%@page import="in.co.sunrays.proj3.controller.Login_Controller"%>
<%@page import="in.co.sunrays.proj3.controller.ORSView"%>
<%@page import="in.co.sunrays.proj3.dto.RoleDTO"%>
<%@page import="in.co.sunrays.proj3.dto.UserDTO"%>
<html lang="en">
<head>

<!-- BootStrap plugin-->

<!-- Required meta tags -->
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<!-- Bootstrap CSS -->
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta/css/bootstrap.min.css" integrity="sha384-/Y6pD6FV/Vv2HJnA6t+vslU6fwYXjCFtcEpHbNJ0lyAFsXTsjBbfaDjzALeQsN6M"
	crossorigin="anonymous">
<!-- Optional JavaScript -->
<!-- jQuery first, then Popper.js, then Bootstrap JS -->
<script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.11.0/umd/popper.min.js" integrity="sha384-b/U6ypiBEHpOf/4+1nzFpr53nxSS+GLCkfwBdFNTxtclqqenISfwAzpKaMNFNmj4" crossorigin="anonymous"></script>
<!-- Always remember to call the above files first before calling the
	bootstrap.min.js file -->
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta/js/bootstrap.min.js" integrity="sha384-h0AbiXch4ZDo7tp9hKZ4TsHbi047NrKGLO3SEJAg45jXxnGIfYzk4Si90RDIqNm1" crossorigin="anonymous"></script>



<!-- StyleSheet Link -->
<link href="../web-pages/StyleSheet.css" rel="stylesheet">


<!-- Date Picker widget -->
<link rel="stylesheet" href="//code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
<script src="https://code.jquery.com/jquery-1.12.4.js"></script>
<script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
<script>
	$(function() {
		$("#datepicker").datepicker({

			maxDate : "0",
			dateFormat : "dd/mm/yy",
			changeYear : true,
			changeMonth : true,
			yearRange : "1950:c"
		});
	});
</script>

<%
	UserDTO userDTO = null;
	RoleDTO roleDTO = null;
	String welcomeMsg = "Hi ";

	if (session.getAttribute("user") != null) {
		userDTO = (UserDTO) session.getAttribute("user");
		roleDTO = (RoleDTO) session.getAttribute("role");

		System.out.println(userDTO.getLogin() + " header");
		System.out.println(roleDTO + " header");

		String username = userDTO.getName();
		String role = roleDTO.getName();

		welcomeMsg += username + " (" + role + ")";
	} else {
		welcomeMsg += "Guest";
	}
%>

<title></title>

</head>

<body>
	<nav class="navbar navbar-expand-md navbar-dark bg-dark" id="navbar">

		<a class="navbar-brand" href="<%=ORSView.WELCOME_CTL%>">
			<img id="image_logo" src="../images/RaysLogo.png" alt="Welcome Page">
		</a>

		<div class="container" id="header_container">

			<!-- it generates menu button when size is small -->
			<button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation">
				<span class="navbar-toggler-icon"></span>
			</button>


			<div class="collapse navbar-collapse d-flex justify-content-center" id="navbarCollapse">
				<ul class=" nav navbar-nav">

					<!-- it is items in the navbar -->
					<%
						if (userDTO != null) {

							if (roleDTO.getName().equalsIgnoreCase("Student")) {
					%>


					<li class="collapse nav-item dropdown">
						<a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"> Profile </a>

						<div class="dropdown-menu">
							<a class="dropdown-item" href="<%=ORSView.MY_PROFILE_CTL%>">My Profile</a>
							<a class="dropdown-item" href="<%=ORSView.CHANGE_PASSWORD_CTL%>">Change Password</a>
						</div>
					</li>


					<li class="nav-item dropdown">
						<a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown"> Marksheet </a>

						<div class="dropdown-menu">
							<a class="dropdown-item" href="<%=ORSView.MARKSHEET_CTL%>">Add Marksheet</a>
							<a class="dropdown-item" href="<%=ORSView.MARKSHEET_MERIT_LIST_CTL%>">View Merit-List</a>
						</div>
					</li>

					<%
						}
							if (roleDTO.getName().equalsIgnoreCase("College") || roleDTO.getName().equalsIgnoreCase("School")) {
					%>


					<li class="nav-item dropdown">
						<a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown"> Profile </a>

						<div class="dropdown-menu">
							<a class="dropdown-item" href="<%=ORSView.MY_PROFILE_CTL%>">My Profile</a>
							<a class="dropdown-item" href="<%=ORSView.CHANGE_PASSWORD_CTL%>">Change Password</a>
						</div>
					</li>


					<li class="nav-item dropdown">
						<a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown"> Marksheet </a>

						<div class="dropdown-menu">
							<a class="dropdown-item" href="<%=ORSView.GET_MARKSHEET_CTL%>">Get Marksheet</a>
							<a class="dropdown-item" href="<%=ORSView.MARKSHEET_CTL%>">Add Marksheet</a>
							<a class="dropdown-item" href="<%=ORSView.MARKSHEET_MERIT_LIST_CTL%>">View Merit-List</a>
							<a class="dropdown-item" href="<%=ORSView.MARKSHEET_LIST_CTL%>">Marksheet List</a>
						</div>
					</li>


					<li class="nav-item dropdown">
						<a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown"> Course </a>

						<div class="dropdown-menu">
							<a class="dropdown-item" href="<%=ORSView.COURSE_CTL%>">Add Course</a>
							<a class="dropdown-item" href="<%=ORSView.COURSE_LIST_CTL%>">Course List</a>
						</div>
					</li>


					<li class="nav-item dropdown">
						<a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown"> Subject </a>

						<div class="dropdown-menu">
							<a class="dropdown-item" href="<%=ORSView.SUBJECT_CTL%>">Add Subject</a>
							<a class="dropdown-item" href="<%=ORSView.SUBJECT_LIST_CTL%>">Subject List</a>
						</div>
					</li>


					<li class="nav-item dropdown">
						<a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown"> Time-Table </a>

						<div class="dropdown-menu">
							<a class="dropdown-item" href="<%=ORSView.TIMETABLE_CTL%>">Add Time-Table</a>
							<a class="dropdown-item" href="<%=ORSView.TIMETABLE_LIST_CTL%>">Time-Table List</a>
						</div>
					</li>


					<%
						}
							if (roleDTO.getName().equalsIgnoreCase("Admin")) {
					%>


					<li class="nav-item dropdown">
						<a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown"> Profile </a>

						<div class="dropdown-menu">
							<a class="dropdown-item" href="<%=ORSView.MY_PROFILE_CTL%>">My Profile</a>
							<a class="dropdown-item" href="<%=ORSView.CHANGE_PASSWORD_CTL%>">Change Password</a>
						</div>
					</li>


					<li class="nav-item dropdown">
						<a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown"> Marksheet </a>

						<div class="dropdown-menu">
							<a class="dropdown-item" href="<%=ORSView.GET_MARKSHEET_CTL%>">Get Marksheet</a>
							<a class="dropdown-item" href="<%=ORSView.MARKSHEET_CTL%>">Add Marksheet</a>
							<a class="dropdown-item" href="<%=ORSView.MARKSHEET_MERIT_LIST_CTL%>">View Merit-List</a>
							<a class="dropdown-item" href="<%=ORSView.MARKSHEET_LIST_CTL%>">Marksheet List</a>
						</div>
					</li>


					<li class="nav-item dropdown">
						<a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown"> Course </a>

						<div class="dropdown-menu">
							<a class="dropdown-item" href="<%=ORSView.COURSE_CTL%>">Add Course</a>
							<a class="dropdown-item" href="<%=ORSView.COURSE_LIST_CTL%>">Course List</a>
						</div>
					</li>


					<li class="nav-item dropdown">
						<a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown"> Student </a>

						<div class="dropdown-menu">
							<a class="dropdown-item" href="<%=ORSView.STUDENT_CTL%>">Add Student</a>
							<a class="dropdown-item" href="<%=ORSView.STUDENT_LIST_CTL%>">Student List</a>
						</div>
					</li>


					<li class="nav-item dropdown">
						<a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown"> Subject </a>

						<div class="dropdown-menu">
							<a class="dropdown-item" href="<%=ORSView.SUBJECT_CTL%>">Add Subject</a>
							<a class="dropdown-item" href="<%=ORSView.SUBJECT_LIST_CTL%>">Subject List</a>
						</div>
					</li>


					<li class="nav-item dropdown">
						<a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown"> Time-Table </a>

						<div class="dropdown-menu">
							<a class="dropdown-item" href="<%=ORSView.TIMETABLE_CTL%>">Add Time-Table</a>
							<a class="dropdown-item" href="<%=ORSView.TIMETABLE_LIST_CTL%>">Time-Table List</a>
						</div>
					</li>


					<li class="nav-item dropdown">
						<a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown"> College </a>

						<div class="dropdown-menu">
							<a class="dropdown-item" href="<%=ORSView.COLLEGE_CTL%>">Add College</a>
							<a class="dropdown-item" href="<%=ORSView.COLLEGE_LIST_CTL%>">College List</a>
						</div>
					</li>


					<li class="nav-item dropdown">
						<a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown"> Faculty </a>

						<div class="dropdown-menu">
							<a class="dropdown-item" href="<%=ORSView.FACULTY_CTL%>">Add Faculty</a>
							<a class="dropdown-item" href="<%=ORSView.FACULTY_LIST_CTL%>">Faculty List</a>
						</div>
					</li>


					<li class="nav-item dropdown">
						<a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown"> Role </a>

						<div class="dropdown-menu">
							<a class="dropdown-item" href="<%=ORSView.ROLE_CTL%>">Add Role</a>
							<a class="dropdown-item" href="<%=ORSView.ROLE_LIST_CTL%>">Role List</a>
						</div>
					</li>


					<li class="nav-item dropdown">
						<a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown"> User </a>

						<div class="dropdown-menu">
							<a class="dropdown-item" href="<%=ORSView.USER_CTL%>">Add User</a>
							<a class="dropdown-item" href="<%=ORSView.USER_LIST_VIEW%>">User List</a>
						</div>
					</li>
					<%
						}
							/** if(role=admin ends here) */
					%>
				</ul>
			</div>

			<div class="mx-2 " id="">
				<ul class="nav navbar-nav ">

					<li>
						<a class="nav-link" href="<%=ORSView.LOGIN_CTL%>?operation=<%=Login_Controller.OP_LOG_OUT%>">Logout</a>
					</li>

					<%	/** if session.user is active ends here */
						} else {
					%>
				</ul>
			</div>



			<div class="collapse navbar text-nowrap d-flex " id="navbarNav">
				<ul class="navbar-nav ">
					<li class="nav-item" >
						<a class="nav-link" href="<%=ORSView.USER_REGISTRATION_CTL%>">Sign Up</a>
					</li>
					<li class="nav-item">
						<a class="nav-link" href="<%=ORSView.LOGIN_CTL%>">Login</a>
					</li>

					<%
						}
					%>

				</ul>
			</div>

		</div>
	</nav>

</body>

</html>